---
http_interactions:
- request:
    method: get
    uri: https://mein-senec.de
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - ruby-senec/0.19.0 (+https://github.com/solectrus/senec)
      connection:
      - keep-alive
  response:
    status:
      code: 302
      message: Found
    headers:
      set-cookie:
      - XSRF-TOKEN=FILTERED_TOKEN; Path=/; Secure; HttpOnly, SESSION=FILTERED_SESSION;
        Path=/; Secure; HttpOnly; SameSite=Lax
      x-content-type-options:
      - nosniff
      x-xss-protection:
      - 1; mode=block
      cache-control:
      - no-cache, no-store, max-age=0, must-revalidate
      pragma:
      - no-cache
      expires:
      - '0'
      strict-transport-security:
      - max-age=31536000 ; includeSubDomains
      x-frame-options:
      - SAMEORIGIN
      location:
      - https://mein-senec.de/oauth2/authorization/login-portal
      content-length:
      - '0'
      date:
      - Thu, 24 Jul 2025 07:24:39 GMT
      x-server:
      - node2
    body:
      encoding: UTF-8
      string: ''
  recorded_at: Thu, 24 Jul 2025 07:24:39 GMT
- request:
    method: get
    uri: https://mein-senec.de/oauth2/authorization/login-portal
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - ruby-senec/0.19.0 (+https://github.com/solectrus/senec)
      connection:
      - keep-alive
      cookie:
      - XSRF-TOKEN=FILTERED_TOKEN; SESSION=FILTERED_SESSION
  response:
    status:
      code: 302
      message: Found
    headers:
      x-content-type-options:
      - nosniff
      x-xss-protection:
      - 1; mode=block
      cache-control:
      - no-cache, no-store, max-age=0, must-revalidate
      pragma:
      - no-cache
      expires:
      - '0'
      strict-transport-security:
      - max-age=31536000 ; includeSubDomains
      x-frame-options:
      - SAMEORIGIN
      location:
      - https://sso.senec.com/realms/senec/protocol/openid-connect/auth?response_type=code&client_id=meinsenec-login-portal&scope=openid&state=FILTERED_STATE&redirect_uri=https://mein-senec.de/login/oauth2/code/login-portal&nonce=FILTERED_NONCE
      content-length:
      - '0'
      date:
      - Thu, 24 Jul 2025 07:24:39 GMT
      x-server:
      - node2
    body:
      encoding: UTF-8
      string: ''
  recorded_at: Thu, 24 Jul 2025 07:24:39 GMT
- request:
    method: get
    uri: https://sso.senec.com/realms/senec/protocol/openid-connect/auth?client_id=meinsenec-login-portal&nonce=FILTERED_NONCE&redirect_uri=https%3A%2F%2Fmein-senec.de%2Flogin%2Foauth2%2Fcode%2Flogin-portal&response_type=code&scope=openid&state=FILTERED_STATE
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - ruby-senec/0.19.0 (+https://github.com/solectrus/senec)
      connection:
      - keep-alive
      cookie:
      - XSRF-TOKEN=FILTERED_TOKEN; SESSION=FILTERED_SESSION
  response:
    status:
      code: 200
      message: OK
    headers:
      date:
      - Thu, 24 Jul 2025 07:24:39 GMT
      content-type:
      - text/html;charset=utf-8
      content-length:
      - '6101'
      connection:
      - keep-alive
      set-cookie:
      - AUTH_SESSION_ID=FILTERED_SESSION;Version=1;Path=/realms/senec/;Secure;HttpOnly;SameSite=None,
        KC_AUTH_SESSION_HASH=FILTERED_HASH;Version=1;Path=/realms/senec/;Max-Age=60;Secure;SameSite=None,
        KC_RESTART=FILTERED_RESTART;Version=1;Path=/realms/senec/;Secure;HttpOnly;SameSite=None
      cache-control:
      - no-store, must-revalidate, max-age=0
      content-language:
      - en
      content-security-policy:
      - frame-src 'self'; frame-ancestors 'self'; object-src 'none';
      referrer-policy:
      - no-referrer
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-robots-tag:
      - none
    body:
      encoding: UTF-8
      string: "    <!DOCTYPE html>\n    <html lang=\"en\">\n\n    <head>\n        <meta
        charset=\"UTF-8\">\n        <title>\n        Login - SENEC\n        </title>\n
        \       <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n
        \       <link rel=\"stylesheet\" href=\"/resources/jkvmr/login/senec/css/styles.css?v=2.3\">\n
        \       <script type=\"importmap\">\n            {\n                \"imports\":
        {\n                    \"rfc4648\": \"/resources/jkvmr/common/keycloak/vendor/rfc4648/rfc4648.js\"\n
        \               }\n            }\n        </script>\n        <script type=\"module\"
        src=\"/resources/jkvmr/login/senec/js/passwordVisibility.js\"></script>\n
        \       <script type=\"module\">\n            import { startSessionPolling
        } from \"/resources/jkvmr/login/senec/js/authChecker.js\";\n\n            startSessionPolling(\n
        \               \"/realms/senec/login-actions/restart?client_id=meinsenec-login-portal&tab_id=FILTERED_TAB_ID&client_data=FILTERED_CLIENT_DATA&skip_logout=true\"\n
        \           );\n        </script>\n        <script type=\"module\">\n            document.addEventListener(\"click\",
        (event) => {\n                const link = event.target.closest(\"a[data-once-link]\");\n\n
        \               if (!link) {\n                    return;\n                }\n\n
        \               if (link.getAttribute(\"aria-disabled\") === \"true\") {\n
        \                   event.preventDefault();\n                    return;\n
        \               }\n\n                const { disabledClass } = link.dataset;\n\n
        \               if (disabledClass) {\n                    link.classList.add(...disabledClass.trim().split(/\\s+/));\n
        \               }\n\n                link.setAttribute(\"role\", \"link\");\n
        \               link.setAttribute(\"aria-disabled\", \"true\");\n            });\n
        \       </script>\n        <script type=\"module\">\n            import {
        checkAuthSession } from \"/resources/jkvmr/login/senec/js/authChecker.js\";\n\n
        \           checkAuthSession(\"FILTERED_HASH\");\n        </script>\n    </head>\n\n
        \   <body>\n        <div class=\"background\">\n            <div class=\"content-container\">\n
        \               <div class=\"logo-container\">\n                    <img src=\"/resources/jkvmr/login/senec/img/senec-logo-white.png\"
        alt=\"SENEC Logo\">\n                </div>\n                <div class=\"login-container\">\n
        \                   <div class=\"login-form\">\n                        <h2>\n
        \       Sign in now\n                        </h2>\n                        <!--
        Error message handling -->\n            <form id=\"kc-form-login\" onsubmit=\"login.disabled
        = true; return true;\" action=\"https://sso.senec.com/realms/senec/login-actions/authenticate?session_code=FILTERED_SESSION_CODE&amp;execution=FILTERED_EXECUTION&amp;client_id=meinsenec-login-portal&amp;tab_id=FILTERED_TAB_ID&amp;client_data=FILTERED_CLIENT_DATA\"
        method=\"post\">\n                <div class=\"input-group\">\n                    <input
        type=\"text\" id=\"username\" name=\"username\"  value=\"\"\n                        placeholder=\"Enter
        your email\" autocomplete=\"username\"\n                        aria-invalid=\"\"
        dir=\"ltr\">\n                </div>\n\n                <div class=\"input-group\">\n
        \                   <input type=\"password\" id=\"password\" name=\"password\"
        \n                        placeholder=\"Enter your password\"\n                        autocomplete=\"current-password\"
        aria-invalid=\"\">\n                </div>\n                    <div class=\"forgot-password\">\n
        \                       <a href=\"/realms/senec/login-actions/reset-credentials?client_id=meinsenec-login-portal&amp;tab_id=FILTERED_TAB_ID&amp;client_data=FILTERED_CLIENT_DATA\">\n
        \                           Forgot Password?\n                        </a>\n
        \                   </div>\n                <div class=\"input-group\">\n
        \                   <button type=\"submit\" class=\"custom-button\" name=\"login\"
        id=\"kc-login\">\n                        Login\n                    </button>\n
        \               </div>\n            </form>\n                <div class=\"social-login\">\n
        \                           <span class=\"mek-login-label\">Please <b>only</b>
        use this button if you are a <b>technical partner</b> <b>and</b> your <b>SENEC.Cockpit</b>
        account has already been activated.</span>\n                            <div
        class=\"input-group\" style=\"margin-top: 10px;\">\n                                <button
        type=\"button\"\n                                        class=\"custom-button
        custom-button-bordered\"\n                                        onclick=\"window.location.href='/realms/senec/broker/mek/login?client_id=meinsenec-login-portal&amp;tab_id=FILTERED_TAB_ID&amp;client_data=FILTERED_CLIENT_DATA&amp;session_code=FILTERED_SESSION_CODE\">\n
        \                                   <img src=\"https://cdncustomeraccesstest.azureedge.net/auth0/100/logo-mek.svg\"\n
        \                                           alt=\"myEnergyKey\"\n                                            style=\"height:
        24px;\" />\n                                </button>\n                            </div>\n
        \               </div>\n                    </div>\n                </div>\n
        \           </div>\n                    <div class=\"footer\">\n                        <a
        href=\"https://senec.com/impressum\" class=\"footer-link\" target=\"_blank\">\n
        \                           Imprint</a>\n                        <a href=\"https://senec.com/de/mein-senec-app-datenschutzerklaerung\"
        class=\"footer-link\" target=\"_blank\">\n                            Data
        Privacy</a>\n                    </div>\n        </div>\n    </body>\n\n    </html>\n"
  recorded_at: Thu, 24 Jul 2025 07:24:39 GMT
- request:
    method: post
    uri: https://sso.senec.com/realms/senec/login-actions/authenticate?client_data=FILTERED_CLIENT_DATA&client_id=meinsenec-login-portal&execution=FILTERED_EXECUTION&session_code=FILTERED_SESSION_CODE&tab_id=FILTERED_TAB_ID
    body:
      encoding: US-ASCII
      string: username=FILTERED_EMAIL&password=FILTERED_PASSWORD
    headers:
      User-Agent:
      - ruby-senec/0.19.0 (+https://github.com/solectrus/senec)
      connection:
      - keep-alive
      cookie:
      - XSRF-TOKEN=FILTERED_TOKEN; SESSION=FILTERED_SESSION; AUTH_SESSION_ID=FILTERED_SESSION;
        KC_AUTH_SESSION_HASH=FILTERED_HASH; KC_RESTART=FILTERED_RESTART
      content-type:
      - application/x-www-form-urlencoded
  response:
    status:
      code: 200
      message: OK
    headers:
      date:
      - Thu, 24 Jul 2025 07:24:39 GMT
      content-type:
      - text/html;charset=utf-8
      content-length:
      - '6830'
      connection:
      - keep-alive
      cache-control:
      - no-store, must-revalidate, max-age=0
      content-language:
      - en
      content-security-policy:
      - frame-src 'self'; frame-ancestors 'self'; object-src 'none';
      referrer-policy:
      - no-referrer
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-frame-options:
      - SAMEORIGIN
      x-robots-tag:
      - none
    body:
      encoding: UTF-8
      string: |2
            <!DOCTYPE html>
            <html lang="en">

            <head>
                <meta charset="UTF-8">
                <title>
                Login - SENEC
                </title>
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <link rel="stylesheet" href="/resources/jkvmr/login/senec/css/styles.css?v=2.3">
                <script type="importmap">
                    {
                        "imports": {
                            "rfc4648": "/resources/jkvmr/common/keycloak/vendor/rfc4648/rfc4648.js"
                        }
                    }
                </script>
                <script type="module" src="/resources/jkvmr/login/senec/js/passwordVisibility.js"></script>
                <script type="module">
                    import { startSessionPolling } from "/resources/jkvmr/login/senec/js/authChecker.js";

                    startSessionPolling(
                        "/realms/senec/login-actions/restart?client_id=meinsenec-login-portal&tab_id=FILTERED_TAB_ID&client_data=FILTERED_CLIENT_DATA&skip_logout=true"
                    );
                </script>
                <script type="module">
                    document.addEventListener("click", (event) => {
                        const link = event.target.closest("a[data-once-link]");

                        if (!link) {
                            return;
                        }

                        if (link.getAttribute("aria-disabled") === "true") {
                            event.preventDefault();
                            return;
                        }

                        const { disabledClass } = link.dataset;

                        if (disabledClass) {
                            link.classList.add(...disabledClass.trim().split(/\s+/));
                        }

                        link.setAttribute("role", "link");
                        link.setAttribute("aria-disabled", "true");
                    });
                </script>
                <script type="module">
                    import { checkAuthSession } from "/resources/jkvmr/login/senec/js/authChecker.js";

                    checkAuthSession("FILTERED_HASH");
                </script>
            <SCRIPT> if (typeof history.replaceState === 'function') {  history.replaceState({}, "some title", "https://sso.senec.com/realms/senec/login-actions/authenticate?execution=FILTERED_EXECUTION&client_id=meinsenec-login-portal&tab_id=FILTERED_TAB_ID&client_data=FILTERED_CLIENT_DATA"); }</SCRIPT></head>

            <body>
                <div class="background">
                    <div class="content-container">
                        <div class="logo-container">
                            <img src="/resources/jkvmr/login/senec/img/senec-logo-white.png" alt="SENEC Logo">
                        </div>
                        <div class="login-container">
                            <div class="login-form">
                                <h2>
                Sign in now
                                </h2>
                                <!-- Error message handling -->
                    <form id="kc-form-login" onsubmit="login.disabled = true; return true;" action="https://sso.senec.com/realms/senec/login-actions/authenticate?session_code=FILTERED_SESSION_CODE&amp;execution=FILTERED_EXECUTION&amp;client_id=meinsenec-login-portal&amp;tab_id=FILTERED_TAB_ID&amp;client_data=FILTERED_CLIENT_DATA" method="post">
                        <div class="input-group">
                            <input type="text" id="username" name="username"  class="input-error" value="FILTERED_EMAIL"
                                placeholder="Enter your email" autocomplete="username"
                                aria-invalid="true" dir="ltr">
                                     <span id="input-error" class="input-error-message" aria-live="polite">
                                             Invalid username or password.
                                     </span>
                        </div>

                        <div class="input-group">
                            <input type="password" id="password" name="password"  class="input-error"
                                placeholder="Enter your password"
                                autocomplete="current-password" aria-invalid="true">
                        </div>
                            <div class="forgot-password">
                                <a href="/realms/senec/login-actions/reset-credentials?client_id=meinsenec-login-portal&amp;tab_id=FILTERED_TAB_ID&amp;client_data=FILTERED_CLIENT_DATA">
                                    Forgot Password?
                                </a>
                            </div>
                        <div class="input-group">
                            <button type="submit" class="custom-button" name="login" id="kc-login">
                                Login
                            </button>
                        </div>
                    </form>
                        <div class="social-login">
                                    <span class="mek-login-label">Please <b>only</b> use this button if you are a <b>technical partner</b> <b>and</b> your <b>SENEC.Cockpit</b> account has already been activated.</span>
                                    <div class="input-group" style="margin-top: 10px;">
                                        <button type="button"
                                                class="custom-button custom-button-bordered"
                                                onclick="window.location.href='/realms/senec/broker/mek/login?client_id=meinsenec-login-portal&amp;tab_id=FILTERED_TAB_ID&amp;client_data=FILTERED_CLIENT_DATA&amp;session_code=FILTERED_SESSION_CODE">
                                            <img src="https://cdncustomeraccesstest.azureedge.net/auth0/100/logo-mek.svg"
                                                    alt="myEnergyKey"
                                                    style="height: 24px;" />
                                        </button>
                                    </div>
                        </div>
                            </div>
                        </div>
                    </div>
                            <div class="footer">
                                <a href="https://senec.com/impressum" class="footer-link" target="_blank">
                                    Imprint</a>
                                <a href="https://senec.com/de/mein-senec-app-datenschutzerklaerung" class="footer-link" target="_blank">
                                    Data Privacy</a>
                            </div>
                </div>
            </body>

            </html>
  recorded_at: Thu, 24 Jul 2025 07:24:40 GMT
recorded_with: VCR 6.3.1
